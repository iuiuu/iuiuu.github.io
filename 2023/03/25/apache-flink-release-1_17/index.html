<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Apache Flink 1.17 发版公告 | Johnson Lin</title><meta name="author" content="Johnson Lin"><meta name="copyright" content="Johnson Lin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本文翻译自 Apache Flink 社区博文——《Announcing the Release of Apache Flink 1.17》  Apache Flink PMC（项目管理委员会）很高兴地宣布发布 Apache Flink 1.17.0 版。Apache Flink 是领先的流处理标准，统一的流和批数据处理概念正被越来越多的公司成功采用。得益于我们优秀的社区和贡献者，Apache F">
<meta property="og:type" content="article">
<meta property="og:title" content="Apache Flink 1.17 发版公告">
<meta property="og:url" content="http://linjiangxiong.com/2023/03/25/apache-flink-release-1_17/index.html">
<meta property="og:site_name" content="Johnson Lin">
<meta property="og:description" content="本文翻译自 Apache Flink 社区博文——《Announcing the Release of Apache Flink 1.17》  Apache Flink PMC（项目管理委员会）很高兴地宣布发布 Apache Flink 1.17.0 版。Apache Flink 是领先的流处理标准，统一的流和批数据处理概念正被越来越多的公司成功采用。得益于我们优秀的社区和贡献者，Apache F">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2023-03-25T11:30:25.000Z">
<meta property="article:modified_time" content="2023-09-26T15:50:32.981Z">
<meta property="article:author" content="Johnson Lin">
<meta property="article:tag" content="git">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/image/IMG_3665.JPG"><link rel="canonical" href="http://linjiangxiong.com/2023/03/25/apache-flink-release-1_17/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ca45da0012a3ce293c6ca4f7e5ebc3a8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=WLKqFH01ST8bHfxLtjsterJZnoEpVlF26sn-Nzzoqfc"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'WLKqFH01ST8bHfxLtjsterJZnoEpVlF26sn-Nzzoqfc');
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Apache Flink 1.17 发版公告',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-26 23:50:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet"> <link rel="stylesheet" href="/css/ud_v5.css" /><meta name="generator" content="Hexo 7.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/image/IMG_3665.JPG" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">216</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">43</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 极简教程</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/2023/09/05/tutorial-gson/"><i class="fa-fw fas fa-music"></i><span> 极简教程 - Gson</span></a></li><li><a class="site-page child" href="/categories/Redis%E6%95%99%E7%A8%8B/"><i class="fa-fw fas fa-book"></i><span> Redis教程</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Johnson Lin"><span class="site-name">Johnson Lin</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 极简教程</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/2023/09/05/tutorial-gson/"><i class="fa-fw fas fa-music"></i><span> 极简教程 - Gson</span></a></li><li><a class="site-page child" href="/categories/Redis%E6%95%99%E7%A8%8B/"><i class="fa-fw fas fa-book"></i><span> Redis教程</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Apache Flink 1.17 发版公告</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-03-25T11:30:25.000Z" title="Created 2023-03-25 19:30:25">2023-03-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-09-26T15:50:32.981Z" title="Updated 2023-09-26 23:50:32">2023-09-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E6%96%87%E6%91%98/">编程文摘</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Apache Flink 1.17 发版公告"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>本文翻译自 Apache Flink 社区博文——<a target="_blank" rel="noopener" href="https://flink.apache.org/2023/03/23/announcing-the-release-of-apache-flink-1.17/">《Announcing the Release of Apache Flink 1.17》</a></p>
<hr>
<p>Apache Flink PMC（项目管理委员会）很高兴地宣布发布 Apache Flink 1.17.0 版。Apache Flink 是领先的流处理标准，统一的流和批数据处理概念正被越来越多的公司成功采用。得益于我们优秀的社区和贡献者，Apache Flink 作为一项技术在不断发展壮大，并且仍然是 Apache 软件基金会中最活跃的项目之一。Flink 1.17 版本有 172 位贡献者热情参与，完成了 7 个 FLIP 和 600 多个问题，为社区带来了许多令人兴奋的新功能和改进。</p>
<h2 id="迈向流式仓库"><a href="#迈向流式仓库" class="headerlink" title="迈向流式仓库"></a>迈向流式仓库</h2><p>为了在流式仓库领域实现更高的效率，Flink 1.17 在批处理性能和流处理语义方面进行了大量改进。这些改进标志着朝创建更高效、更精简的数据仓库迈出的重要一步，使其能够实时处理大量数据。</p>
<p>对于批处理而言，此版本包含了多项新功能和改进：</p>
<ul>
<li><strong>流式仓库 API：</strong>FLIP-282 在 Flink SQL 中引入了新的删除和更新 API，该 API 仅在批处理模式下工作。像 Flink Table Store 这样的外部存储系统可以通过这个新的 API 实现行级修改。ALTER TABLE 语法得到了增强，包括添加/修改/删除列、主键和水印的能力，使用户更容易维护表的模式。</li>
<li><strong>批处理执行改进：</strong>在 Flink 1.17 中，批处理工作负载的执行在性能、稳定性和可用性方面都得到了显著改进。在性能方面，通过策略和运算符优化，如新的连接重排序和自适应本地哈希聚合、Hive 聚合函数改进以及混合洗牌模式（Hybrid Shuffle Mode）增强，10T 数据集的 TPC-DS 性能提高了 26%。在稳定性方面，推测执行（Speculative Execution）现在支持所有运算符，并且自适应批处理调度器（Adaptive Batch Scheduler）对数据倾斜更加健壮。在易用性方面，批处理工作负载所需的调优工作得到了简化。混合洗牌模式现在是批处理模式的默认调度器。混合洗牌模式与推测执行和自适应批处理调度器兼容，并简化了各种配置。</li>
<li><strong>SQL 客户端/网关：</strong>Apache Flink 1.17 为 SQL 客户端引入了“网关模式”，允许用户向 SQL 网关提交 SQL 查询以获得增强功能。用户可以使用 SQL 语句来管理作业生命周期，包括显示作业信息和停止正在运行的作业。这为管理 Flink 作业提供了强大的工具。</li>
</ul>
<p>流处理方面实现了以下功能和改进：</p>
<ul>
<li><strong>流式 SQL 语义：</strong>非确定性操作可能会带来错误的结果或异常，在流式 SQL 中这是一个有挑战性的问题。修复了不正确的优化计划和功能问题，并引入了 PLAN_ADVICE 实验性功能，以向 SQL 用户提供潜在的正确性风险和优化建议信息。</li>
<li><strong>检查点改进：</strong>通用增量检查点改进提高了检查点过程的速度和稳定性，在 Flink 1.17 中，非对齐检查点在背压情况下的稳定性得到了改善，并且已经达到了生产就绪状态。用户可以在作业运行时通过新引入的触发检查点的 REST 接口来手动触发具有自定义检查点类型的检查点。</li>
<li><strong>水印对齐增强：</strong>高效的水印处理直接影响事件时间应用程序的执行效率。在 Flink 1.17 中，FLIP-217 引入了一种改进的水印对齐方式，通过对源操作符内的分片进行数据发射对齐，从而更有效地协调源中的水印进度，从而减少下游操作符的过度缓冲，提高流作业执行的整体效率。</li>
<li><strong>状态后端升级：</strong>FRocksDB 升级到 6.20.3-ververica-2.0 版本，为 RocksDBStateBackend 带来了改进，如在插槽之间共享内存，并且现在支持苹果芯片（如 Mac M1）。</li>
</ul>
<h2 id="批处理"><a href="#批处理" class="headerlink" title="批处理"></a>批处理</h2><p>作为一个统一的流和批处理数据引擎，Flink 在流处理领域尤为突出。为了提高其批处理能力，社区贡献者在 1.17 版本中投入了大量精力来改进 Flink 的批处理性能和生态系统。这使得用户可以更轻松地基于 Flink 构建流式仓库。</p>
<h3 id="推测执行（Speculative-Execution）"><a href="#推测执行（Speculative-Execution）" class="headerlink" title="推测执行（Speculative Execution）"></a>推测执行（Speculative Execution）</h3><p>现在支持 Sink 的推测执行（Speculative Execution）。以前，为了避免不稳定或错误的结果，Sink 未启用推测执行。在 Flink 1.17 中，改进了 Sink 的上下文，使得 Sink（包括新的 Sink 和 OutputFormat Sink 在内）能够感知到尝试次数。有了尝试次数，即使多个尝试同时运行，Sink 也能够隔离同一子任务的不同尝试产生的数据。此外，还改进了 FinalizeOnMaster 接口，使得 OutputFormat Sink 可以查看哪些尝试已经完成，然后正确提交已写入的数据。一旦 Sink 能够很好地处理并发尝试，就可以实现装饰接口 SupportsConcurrentExecutionAttempts，从而允许对其进行推测执行。一些内置的 Sink 已经启用了推测执行，包括 DiscardingSink、PrintSinkFunction、PrintSink、FileSink、FileSystemOutputFormat 和 HiveTableSink。</p>
<p>推测执行的慢任务检测也得到了改进。以前，确定哪些任务较慢时只考虑任务的执行时间。现在还考虑了任务的输入数据量。执行时间较长但同时消耗更多数据的任务可能不被视为慢任务。这一改进有助于消除数据倾斜对慢任务检测的负面影响。</p>
<h3 id="自适应批处理调度器（Adaptive-Batch-Scheduler）"><a href="#自适应批处理调度器（Adaptive-Batch-Scheduler）" class="headerlink" title="自适应批处理调度器（Adaptive Batch Scheduler）"></a>自适应批处理调度器（Adaptive Batch Scheduler）</h3><p>Adaptive Batch Scheduler 现在默认用于批处理作业。该调度器可以根据每个作业任务处理的数据量自动确定适当的并行度。它也是唯一支持推测执行的调度器。</p>
<p>Adaptive Batch Scheduler 的配置得到了改进，更易于使用。用户不再需要显式地将全局默认并行度设置为 -1，就能自动决定并行度。相反，如果设置了全局默认并行度，那么在决定并行度时，全局默认并行度将被用作上限。Adaptive Batch Scheduler 配置选项的键名也已更名，以便更易于理解。</p>
<p>Adaptive Batch Scheduler 的功能也得到了改进。它现在支持根据细粒度的数据分布信息将数据均匀地分发给下游任务。不再需要并行度只能是 2 的幂次的限制，因此取消了这一限制。</p>
<h3 id="混合洗牌模式（Hybrid-Shuffle-Mode）"><a href="#混合洗牌模式（Hybrid-Shuffle-Mode）" class="headerlink" title="混合洗牌模式（Hybrid Shuffle Mode）"></a>混合洗牌模式（Hybrid Shuffle Mode）</h3><p>本次发布中对混合洗牌模式进行了多项重要改进。</p>
<p>混合洗牌模式现在支持自适应批处理调度器（Adaptive Batch Scheduler）和推测执行（Speculative Execution）。</p>
<p>混合洗牌模式现在支持在可能的情况下重复使用中间数据，这带来了显著的性能提升。</p>
<p>改进了稳定性，以避免在大规模生产中出现稳定性问题。</p>
<p>更多详细信息请参阅文档中的<a target="_blank" rel="noopener" href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/ops/batch/batch_shuffle/#hybrid-shuffle">混合洗牌（Hybrid-Shuffle）</a>部分。</p>
<h3 id="TPC-DS-基准"><a href="#TPC-DS-基准" class="headerlink" title="TPC-DS 基准"></a>TPC-DS 基准</h3><p>从 Flink 1.16 开始，批处理引擎的性能不断得到优化。在 Flink 1.16 中，引入了动态分区剪枝，但并非所有 TPC-DS 查询都可以被优化。在 Flink 1.17 中，该算法已得到改进，现在大多数 TPC-DS 结果都得到了优化。在 Flink 1.17 中，引入了一种动态规划连接重排算法，与先前的算法相比，它的工作效果更好，搜索空间更大。查询计划器可以根据查询中连接的数量自动选择适当的连接重排算法，因此用户无需关注连接重排算法。（注意：连接重排默认情况下是禁用的，运行 TPC-DS 时需要启用）。在算子层面上，引入了动态哈希局部聚合策略，它可以根据数据分布动态确定是否需要进行局部哈希聚合操作以提高性能。在运行时层面上，去除了一些不必要的虚拟函数调用，以加速执行速度。总之，在使用分区表的 10T 数据集上，与 Flink 1.16 相比，Flink 1.17 的性能提高了 26%。</p>
<p><img src="https://flink.apache.org/img/blog/2023-03-23-release-1.17.0/tpc-ds-benchmark.png" alt="image.png"></p>
<h3 id="SQL-客户端-网关（SQL-Client-Gateway）"><a href="#SQL-客户端-网关（SQL-Client-Gateway）" class="headerlink" title="SQL 客户端/网关（SQL Client / Gateway）"></a>SQL 客户端/网关（SQL Client / Gateway）</h3><p>Apache Flink 1.17 为 SQL Client 引入了一项名为“网关模式”（gateway mode）的新功能，它允许 SQL Client 连接到远程网关，并像在嵌入式模式下一样提交 SQL 查询，从而增强了 SQL Client 的功能。这种新模式为用户在使用 SQL Gateway 时提供了更多的便利。</p>
<p>此外，SQL Client/SQL Gateway 现在还为通过 SQL 语句管理作业生命周期提供了新的支持。用户可以使用 SQL 语句显示存储在 JobManager 中的所有作业信息，并使用唯一的作业 ID 停止运行中的作业。有了这项新功能，SQL Client/Gateway 现在几乎具备了与 Flink CLI 相同的功能，成为管理 Flink 作业的又一强大工具。</p>
<h3 id="SQL-API"><a href="#SQL-API" class="headerlink" title="SQL API"></a>SQL API</h3><p>行级 SQL 删除和更新在现代大数据工作流中变得越来越重要。使用案例包括为遵守法规而删除一组行，为纠正数据而更新一组行等。许多流行的引擎（如 Trino 或 Hive）已经支持了这些功能。在 Flink 1.17 中，Flink 引入了新的删除和更新 API，该 API 以批处理模式工作，并暴露给连接器。现在，外部存储系统可以通过这个新 API 实现行级修改。此外，ALTER TABLE 语法还扩展了添加/修改/删除列、主键和水印的功能。这些增强功能为用户提供了根据自身需要维护表模式元数据的灵活性。</p>
<h3 id="Hive-兼容性"><a href="#Hive-兼容性" class="headerlink" title="Hive 兼容性"></a>Hive 兼容性</h3><p>Apache Flink 1.17 对 Hive 表 Sink 进行了改进，使其比以往更加高效。在以前的版本中，Hive 表 Sink 只支持流模式下的自动文件压缩，而不支持批处理模式。在 Flink 1.17 中，Hive 表 Sink 现在也能在批处理模式下自动压缩新写入的文件。这一功能可以大大减少小文件的数量。此外，为了通过 HiveModule 使用 Hive 内置函数，Flink 在 HiveModule 中引入了多个原生 Hive 聚合函数，包括 SUM/COUNT/AVG/MIN/MAX。这些函数可以使用基于哈希的聚合算子来执行，从而显著提高性能。</p>
<h2 id="流处理"><a href="#流处理" class="headerlink" title="流处理"></a>流处理</h2><p>在 Flink 1.17 中，解决了流式 SQL 语义难点和正确性问题，优化了检查点性能，增强了水印对齐功能，扩展了流 FileSink 对 ABFS（Azure Blob Filesystem）的支持，并将 Calcite 和 FRocksDB 升级到了更新的版本。这些改进进一步增强了 Flink 在流处理领域的能力。</p>
<h3 id="流式-SQL-语义"><a href="#流式-SQL-语义" class="headerlink" title="流式 SQL 语义"></a>流式 SQL 语义</h3><p>在正确性和语义增强方面，Flink 1.17 引入了实验性功能 PLAN_ADVICE，用于检测潜在的正确性风险并提供优化建议。例如，如果通过 EXPLAIN PLAN_ADVICE 检测到 NDU（非确定性更新）问题，优化器就会在物理计划末尾附加建议，然后将建议 ID 标记到相关操作的关系节点上，并建议用户相应地更新配置。通过向用户提供这些具体建议，优化器可以帮助用户提高查询结果的准确性和可靠性。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">== Optimized Physical Plan With Advice ==</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">advice[1]: [WARNING] The column(s): day(generated by non-deterministic function: CURRENT_TIMESTAMP ) can not satisfy the determinism requirement for correctly processing update message(&#x27;UB&#x27;/&#x27;UA&#x27;/&#x27;D&#x27; in changelogMode, not &#x27;I&#x27; only), this usually happens when input node has no upsertKey(upsertKeys=[&#123;&#125;]) or current node outputs non-deterministic update messages. Please consider removing these non-deterministic columns or making them deterministic by using deterministic functions.</span><br></pre></td></tr></table></figure>

<p>PLAN_ADVICE 还能帮助用户提高查询的性能和效率。例如，当检测到 GroupAggregate 操作时，可将其优化为更高效的本地-全局聚合。通过向用户提供这种具体的优化建议，优化器能让用户轻松提高查询的性能和效率。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">== Optimized Physical Plan With Advice ==</span><br><span class="line">...</span><br><span class="line">advice[1]: [ADVICE] You might want to enable local-global two-phase optimization by configuring (&#x27;table.optimizer.agg-phase-strategy&#x27; to &#x27;AUTO&#x27;).</span><br></pre></td></tr></table></figure>

<p>此外，Flink 1.17 还解决了几个错误的计划优化问题，这些问题导致了 FLINK-29849、FLINK-30006 和 FLINK-30841 中报告的错误结果。</p>
<h3 id="检查点改进"><a href="#检查点改进" class="headerlink" title="检查点改进"></a>检查点改进</h3><p>通用增量检查点（Generic Incremental Checkpoint，GIC）旨在提高检查点过程的速度和稳定性。WordCount 案例的部分实验结果如下所示。更多详情可参阅这篇<a target="_blank" rel="noopener" href="https://www.ververica.com/blog/generic-log-based-incremental-checkpoint">博文</a>。</p>
<p>表 1： 在 WordCount 案例中启用 GIC 后的优势</p>
<p><img src="https://flink.apache.org/img/blog/2023-03-23-release-1.17.0/beneifts-after-enabling-gic-in-wordcount-case.png" alt="https://flink.apache.org/img/blog/2023-03-23-release-1.17.0/beneifts-after-enabling-gic-in-wordcount-case.png"></p>
<p>表 2：在 WordCount 案例中启用 GIC 后的代价</p>
<p><img src="https://flink.apache.org/img/blog/2023-03-23-release-1.17.0/costs-after-enabling-gic-in-wordcount-case.png" alt="https://flink.apache.org/img/blog/2023-03-23-release-1.17.0/costs-after-enabling-gic-in-wordcount-case.png"></p>
<p>非对齐检查点（Unaligned Checkpoints，UC）显著提高了在背压情况下检查点的完成率。之前的 UC 实现会写入许多小文件，这可能会给 HDFS 的 namenode 带来高负载。本版本解决了这一问题，使 UC 在生产环境中更加可用。</p>
<p>在 1.17 版本中，提供了一个 REST API，用户可以在作业运行时使用自定义的检查点类型手动触发检查点。例如，对于使用增量检查点运行的作业，用户可以定期或手动触发全量检查点，以中断增量检查点链，避免引用很久以前的文件。</p>
<h3 id="水印对齐支持"><a href="#水印对齐支持" class="headerlink" title="水印对齐支持"></a>水印对齐支持</h3><p>在早期的版本中，FLIP-182 提出了一种名为水印对齐（watermark alignment）的解决方案，用于解决事件时间应用中由于数据源不平衡造成的数据倾斜问题。然而，它有一个局限性，即源算子的并行度必须与分片数相匹配。这是因为，如果一个分片比另一个分片更快地发送数据，具有多个分片的源算子可能需要缓冲大量数据。为解决这一限制，Flink 1.17 引入了 FLIP-217，它增强了水印对齐功能，在考虑水印边界的同时，对源算子内各分片的数据发射进行对齐。这一增强功能可确保源算子中的水印进度更加协调，防止下游算子缓冲过多数据，并提高流作业的执行效率。</p>
<h3 id="流-FileSink-扩展"><a href="#流-FileSink-扩展" class="headerlink" title="流 FileSink 扩展"></a>流 FileSink 扩展</h3><p>在添加 ABFS 支持后，FileSink 现在能够在流模式下使用总共五种不同的文件系统： HDFS、S3、OSS、ABFS 和本地。这一扩展有效地涵盖了大多数主要文件系统，为用户提供了全面的选择范围和更高的通用性。</p>
<h3 id="RocksDBStateBackend-升级"><a href="#RocksDBStateBackend-升级" class="headerlink" title="RocksDBStateBackend 升级"></a>RocksDBStateBackend 升级</h3><p>此版本将 FRocksDB 升级到了 6.20.3-ververica-2.0，为 RocksDBStateBackend 带来了改进：</p>
<ol>
<li>支持在苹果 Silicon 芯片组上构建 FRocksDB Java，如 Mac M1 和 M2</li>
<li>通过避免昂贵的 ToString() 来提高压缩过滤器的性能</li>
<li>升级 FRocksDB 的 ZLIB 版本以避免内存崩溃</li>
<li>为 RocksJava 添加 periodic_compaction_seconds 选项</li>
</ol>
<p>详情请参见 <a target="_blank" rel="noopener" href="https://issues.apache.org/jira/browse/FLINK-30836">FLINK-30836</a>。</p>
<p>此版本还将插槽（slot）之间共享内存的范围扩大到 TaskManager，这有助于在 TaskManager 中插槽内存使用不均衡的情况下提高内存效率。此外，经过调整后，它还能减少整体内存消耗，但会牺牲资源隔离性能。了解有关 <a target="_blank" rel="noopener" href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/deployment/config/#state-backend-rocksdb-memory-fixed-per-tm">state.backend.rocksdb.memory.fixed-per-tm</a> 配置的更多信息。</p>
<h3 id="Calcite-升级"><a href="#Calcite-升级" class="headerlink" title="Calcite 升级"></a>Calcite 升级</h3><p>Flink 1.17 将 Calcite 升级到 1.29.0 版本，以提高 Flink SQL 系统的性能和效率。Flink 1.16 使用的是 Calcite 1.26.0，该版本在 RexNode 简化方面存在严重问题，这是由 SEARCH 操作符引起的。如 CALCITE-4325 和 CALCITE-4352 中报告的那样，这会导致查询优化时产生错误数据。通过升级 Calcite 版本，Flink 可以在 Flink SQL 处理中充分利用其改进的性能和新特性。这解决了多个错误，并加快了查询处理时间。</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="PyFlink"><a href="#PyFlink" class="headerlink" title="PyFlink"></a>PyFlink</h3><p>Flink 1.17 版本对 Apache Flink 的 Python 接口 PyFlink 进行了更新。值得注意的改进包括对 Python 3.10 的支持，以及在 Apple Silicon 芯片组上（如 Mac M1 和 M2 计算机）的执行能力。此外，该版本还包括了一些小的优化，增强了 Java 和 Python 进程之间的跨进程通信稳定性，通过字符串来指定 Python UDF 的数据类型以提高可用性，并支持在 Python UDF 中访问作业参数。该版本主要关注改进 PyFlink 的功能和可用性，而不是引入新的主要特性。但是，这些增强功能有望改善用户体验，促进高效的数据处理。</p>
<h3 id="每日性能基准测试"><a href="#每日性能基准测试" class="headerlink" title="每日性能基准测试"></a>每日性能基准测试</h3><p>在 Flink 1.17 中，每日性能监控已经集成到 <a target="_blank" rel="noopener" href="https://apache-flink.slack.com/archives/C0471S0DFJ9">#flink-dev-benchmarks Slack</a> 频道中。这个功能对于快速发现回归问题并确保代码质量非常重要。一旦通过 Slack 频道或 speed center 发现了回归问题，开发人员可以参考<a target="_blank" rel="noopener" href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=115511847">基准测试的 Wiki</a> 中提供的指导来有效解决问题。这个功能有助于社区采取主动的方式来确保系统性能，从而实现更好的产品并提高用户满意度。</p>
<h3 id="子任务级火焰图"><a href="#子任务级火焰图" class="headerlink" title="子任务级火焰图"></a>子任务级火焰图</h3><p>从 Flink 1.17 开始，Flame Graph 提供了对任务级别的“向下钻取”可视化功能，使用户能够更详细地了解任务的性能。与 Flame Graph 以前的版本相比，这一功能有了重大改进，因为它使用户能够选择感兴趣的子任务并查看相应的火焰图。通过这种方式，用户可以确定其任务可能遇到性能问题的特定区域，并采取措施加以解决。这将大大提高数据处理管道的整体效率和有效性。</p>
<p><img src="https://flink.apache.org/img/blog/2023-03-23-release-1.17.0/subtask-level-flame-graph.png" alt="https://flink.apache.org/img/blog/2023-03-23-release-1.17.0/subtask-level-flame-graph.png"></p>
<h3 id="通用授权令牌支持"><a href="#通用授权令牌支持" class="headerlink" title="通用授权令牌支持"></a>通用授权令牌支持</h3><p>之前，Flink 支持 Kerberos 认证和基于 Hadoop 的令牌。通过完成 FLIP-272，Flink 的授权令牌框架被泛化，使其与认证协议无关。这将允许贡献者在未来添加对非 Hadoop 兼容框架的支持，在这些框架中，身份验证协议并非基于 Kerberos。此外，FLIP-211 的实现改善了 Flink 与 Kerberos 的交互：它减少了在 Flink 中交换授权令牌所需的请求数量。</p>
<h2 id="升级注意事项"><a href="#升级注意事项" class="headerlink" title="升级注意事项"></a>升级注意事项</h2><p>Flink 社区尽力确保升级过程尽可能无缝。然而，在升级到 1.17 版时，某些变化可能会要求用户对程序的某些部分进行调整。请参阅<a target="_blank" rel="noopener" href="https://nightlies.apache.org/flink/flink-docs-release-1.17/release-notes/flink-1.17/">版本说明</a>，了解在升级过程中需要进行的调整和需要检查的问题的完整列表。</p>
<h2 id="贡献者名单"><a href="#贡献者名单" class="headerlink" title="贡献者名单"></a>贡献者名单</h2><p>Apache Flink 社区向所有促成此版本发布的贡献者表示感谢：</p>
<p>Ahmed Hamdy, Aitozi, Aleksandr Pilipenko, Alexander Fedulov, Alexander Preuß, Anton Kalashnikov, Arvid Heise, Bo Cui, Brayno, Carlos Castro, ChangZhuo Chen (陳昌倬), Chen Qin, Chesnay Schepler, Clemens, ConradJam, Danny Cranmer, Dawid Wysakowicz, Dian Fu, Dong Lin, Dongjoon Hyun, Elphas Toringepi, Eric Xiao, Fabian Paul, Ferenc Csaky, Gabor Somogyi, Gen Luo, Gunnar Morling, Gyula Fora, Hangxiang Yu, Hong Liang Teoh, HuangXingBo, Jacky Lau, Jane Chan, Jark Wu, Jiale, Jin, Jing Ge, Jinzhong Li, Joao Boto, John Roesler, Jun He, JunRuiLee, Junrui Lee, Juntao Hu, Krzysztof Chmielewski, Leonard Xu, Licho, Lijie Wang, Mark Canlas, Martijn Visser, MartijnVisser, Martin Liu, Marton Balassi, Mason Chen, Matt, Matthias Pohl, Maximilian Michels, Mingliang Liu, Mulavar, Nico Kruber, Noah, Paul Lin, Peter Huang, Piotr Nowojski, Qing Lim, QingWei, Qingsheng Ren, Rakesh, Ran Tao, Robert Metzger, Roc Marshal, Roman Khachatryan, Ron, Rui Fan, Ryan Skraba, Salva Alcántara, Samrat, Samrat Deb, Samrat002, Sebastian Mattheis, Sergey Nuyanzin, Seth Saperstein, Shengkai, Shuiqiang Chen, Smirnov Alexander, Sriram Ganesh, Steven van Rossum, Tartarus0zm, Timo Walther, Venkata krishnan Sowrirajan, Wei Zhong, Weihua Hu, Weijie Guo, Xianxun Ye, Xintong Song, Yash Mayya, YasuoStudyJava, Yu Chen, Yubin Li, Yufan Sheng, Yun Gao, Yun Tang, Yuxin Tan, Zakelly, Zhanghao Chen, Zhenqiu Huang, Zhu Zhu, ZmmBigdata, bzhaoopenstack, chengshuo.cs, chenxujun, chenyuzhi, chenyuzhi459, chenzihao, dependabot[bot], fanrui, fengli, frankeshi, fredia, godfreyhe, gongzhongqiang, harker2015, hehuiyuan, hiscat, huangxingbo, hunter-cloud09, ifndef-SleePy, jeremyber-aws, jiangjiguang, jingge, kevin.cyj, kristoffSC, kurt, laughingman7743, libowen, lincoln lee, lincoln.lil, liujiangang, liujingmao, liuyongvs, liuzhuang2017, luoyuxia, mas-chen, moqimoqidea, muggleChen, noelo, ouyangwulin, ramkrish86, saikikun, sammieliu, shihong90, shuiqiangchen, snuyanzin, sunxia, sxnan, tison, todd5167, tonyzhu918, wangfeifan, wenbingshen, xuyang, yiksanchan, yunfengzhou-hub, yunhong, yuxia Luo, yuzelin, zhangjingcun, zhangmang, zhengyunhong.zyh, zhouli, zoucao, 沈嘉琦</p>
<p>（END）</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="http://linjiangxiong.com">Johnson Lin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://linjiangxiong.com/2023/03/25/apache-flink-release-1_17/">http://linjiangxiong.com/2023/03/25/apache-flink-release-1_17/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/git/">git</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/03/28/how-to-parse-json-from-the-second-level-to-the-root-level-in-logstash/" title="Logstash如何将JSON第二层级的数据解析到第一层级"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Logstash如何将JSON第二层级的数据解析到第一层级</div></div></a></div><div class="next-post pull-right"><a href="/2023/03/24/java-convert-iterator-to-list/" title="Java 如何将 Iterator 转换为 List"><img class="cover" src="/image/brand/java.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Java 如何将 Iterator 转换为 List</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/image/IMG_3665.JPG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Johnson Lin</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">216</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">43</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/iuiuu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/iuiuu" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:me@linjiangxiong.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%88%E5%90%91%E6%B5%81%E5%BC%8F%E4%BB%93%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">迈向流式仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%B9%E5%A4%84%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">批处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A8%E6%B5%8B%E6%89%A7%E8%A1%8C%EF%BC%88Speculative-Execution%EF%BC%89"><span class="toc-number">2.1.</span> <span class="toc-text">推测执行（Speculative Execution）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E9%80%82%E5%BA%94%E6%89%B9%E5%A4%84%E7%90%86%E8%B0%83%E5%BA%A6%E5%99%A8%EF%BC%88Adaptive-Batch-Scheduler%EF%BC%89"><span class="toc-number">2.2.</span> <span class="toc-text">自适应批处理调度器（Adaptive Batch Scheduler）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B7%E5%90%88%E6%B4%97%E7%89%8C%E6%A8%A1%E5%BC%8F%EF%BC%88Hybrid-Shuffle-Mode%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">混合洗牌模式（Hybrid Shuffle Mode）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TPC-DS-%E5%9F%BA%E5%87%86"><span class="toc-number">2.4.</span> <span class="toc-text">TPC-DS 基准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-%E5%AE%A2%E6%88%B7%E7%AB%AF-%E7%BD%91%E5%85%B3%EF%BC%88SQL-Client-Gateway%EF%BC%89"><span class="toc-number">2.5.</span> <span class="toc-text">SQL 客户端&#x2F;网关（SQL Client &#x2F; Gateway）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-API"><span class="toc-number">2.6.</span> <span class="toc-text">SQL API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hive-%E5%85%BC%E5%AE%B9%E6%80%A7"><span class="toc-number">2.7.</span> <span class="toc-text">Hive 兼容性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E5%A4%84%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">流处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E5%BC%8F-SQL-%E8%AF%AD%E4%B9%89"><span class="toc-number">3.1.</span> <span class="toc-text">流式 SQL 语义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E7%82%B9%E6%94%B9%E8%BF%9B"><span class="toc-number">3.2.</span> <span class="toc-text">检查点改进</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B0%B4%E5%8D%B0%E5%AF%B9%E9%BD%90%E6%94%AF%E6%8C%81"><span class="toc-number">3.3.</span> <span class="toc-text">水印对齐支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81-FileSink-%E6%89%A9%E5%B1%95"><span class="toc-number">3.4.</span> <span class="toc-text">流 FileSink 扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RocksDBStateBackend-%E5%8D%87%E7%BA%A7"><span class="toc-number">3.5.</span> <span class="toc-text">RocksDBStateBackend 升级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Calcite-%E5%8D%87%E7%BA%A7"><span class="toc-number">3.6.</span> <span class="toc-text">Calcite 升级</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">4.</span> <span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PyFlink"><span class="toc-number">4.1.</span> <span class="toc-text">PyFlink</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%8F%E6%97%A5%E6%80%A7%E8%83%BD%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95"><span class="toc-number">4.2.</span> <span class="toc-text">每日性能基准测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E4%BB%BB%E5%8A%A1%E7%BA%A7%E7%81%AB%E7%84%B0%E5%9B%BE"><span class="toc-number">4.3.</span> <span class="toc-text">子任务级火焰图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E6%8E%88%E6%9D%83%E4%BB%A4%E7%89%8C%E6%94%AF%E6%8C%81"><span class="toc-number">4.4.</span> <span class="toc-text">通用授权令牌支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">5.</span> <span class="toc-text">升级注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%A1%E7%8C%AE%E8%80%85%E5%90%8D%E5%8D%95"><span class="toc-number">6.</span> <span class="toc-text">贡献者名单</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/07/31/how-to-view-mysql-version-a-quick-guide/" title="How to View MySQL Version: A Quick Guide"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="How to View MySQL Version: A Quick Guide"/></a><div class="content"><a class="title" href="/2024/07/31/how-to-view-mysql-version-a-quick-guide/" title="How to View MySQL Version: A Quick Guide">How to View MySQL Version: A Quick Guide</a><time datetime="2024-07-31T14:23:25.000Z" title="Created 2024-07-31 22:23:25">2024-07-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/30/effective-ways-to-delete-fuzzy-matching-keys-in-redis/" title="Effective Ways to Delete Fuzzy Matching Keys in Redis"><img src="/image/2024/07/fuzzy-matching.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Effective Ways to Delete Fuzzy Matching Keys in Redis"/></a><div class="content"><a class="title" href="/2024/07/30/effective-ways-to-delete-fuzzy-matching-keys-in-redis/" title="Effective Ways to Delete Fuzzy Matching Keys in Redis">Effective Ways to Delete Fuzzy Matching Keys in Redis</a><time datetime="2024-07-30T14:57:42.000Z" title="Created 2024-07-30 22:57:42">2024-07-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/29/a-set-of-best-practices-and-guidelines-for-using-redis-effectively/" title="A set of best practices and guidelines for using Redis effectively"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="A set of best practices and guidelines for using Redis effectively"/></a><div class="content"><a class="title" href="/2024/07/29/a-set-of-best-practices-and-guidelines-for-using-redis-effectively/" title="A set of best practices and guidelines for using Redis effectively">A set of best practices and guidelines for using Redis effectively</a><time datetime="2024-07-29T14:53:30.000Z" title="Created 2024-07-29 22:53:30">2024-07-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/27/flushing-cache-data-in-redis-a-step-by-step-guide/" title="Flushing Cache Data in Redis: A Step-by-Step Guide"><img src="/image/2024/07/2024072701.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Flushing Cache Data in Redis: A Step-by-Step Guide"/></a><div class="content"><a class="title" href="/2024/07/27/flushing-cache-data-in-redis-a-step-by-step-guide/" title="Flushing Cache Data in Redis: A Step-by-Step Guide">Flushing Cache Data in Redis: A Step-by-Step Guide</a><time datetime="2024-07-27T15:17:22.000Z" title="Created 2024-07-27 23:17:22">2024-07-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/25/how-to-learn-redis-effectively/" title="How to learn Redis effectively?"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="How to learn Redis effectively?"/></a><div class="content"><a class="title" href="/2024/07/25/how-to-learn-redis-effectively/" title="How to learn Redis effectively?">How to learn Redis effectively?</a><time datetime="2024-07-25T14:40:05.000Z" title="Created 2024-07-25 22:40:05">2024-07-25</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Johnson Lin</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/main.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/search/local-search.min.js"></script></div></div></body></html>