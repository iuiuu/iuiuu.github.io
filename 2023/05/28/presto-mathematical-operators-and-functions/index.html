<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Presto | 数学运算符和函数 | Johnson Lin</title><meta name="author" content="Johnson Lin"><meta name="copyright" content="Johnson Lin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="keywords" content="Java,JVM,Spring,Spring Boot,Flink,Hadoop,Yarn,MySQL,Elasticsearch,Python,Kafka,Maven,Hbase,Kibana,Logstash,Tutorial,Technical Blogs,Data Structures,Algorithms,C,SQL,Data Science,Web Development,System Design,Interview Experience,Interview Preparation,Programming,Competitive Programming,Coding Contests,HTML,CSS,Computer Science,Programming Examples,Mathematics"><meta name="description" content="数学运算符   运算符 描述    + 相加   - 相减   * 相乘   &#x2F; 相除（整数除法执行截断运算）   % 取模（求余）   数学函数abs(x) → [返回类型与 x 相同]返回 x 的绝对值。 cbrt(x) → double返回 x 的立方根。 ceil(x) → [返回类型与 x 相同]ceiling() 函数的别名。 cosine_similarity(x, y) → dou">
<meta property="og:type" content="article">
<meta property="og:title" content="Presto | 数学运算符和函数">
<meta property="og:url" content="http://linjiangxiong.com/2023/05/28/presto-mathematical-operators-and-functions/index.html">
<meta property="og:site_name" content="Johnson Lin">
<meta property="og:description" content="数学运算符   运算符 描述    + 相加   - 相减   * 相乘   &#x2F; 相除（整数除法执行截断运算）   % 取模（求余）   数学函数abs(x) → [返回类型与 x 相同]返回 x 的绝对值。 cbrt(x) → double返回 x 的立方根。 ceil(x) → [返回类型与 x 相同]ceiling() 函数的别名。 cosine_similarity(x, y) → dou">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://linjiangxiong.com/image/brand/logo-presto-color.svg">
<meta property="article:published_time" content="2023-05-28T03:05:05.000Z">
<meta property="article:modified_time" content="2023-05-31T15:57:21.591Z">
<meta property="article:author" content="Johnson Lin">
<meta property="article:tag" content="Presto">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://linjiangxiong.com/image/brand/logo-presto-color.svg"><link rel="shortcut icon" href="/image/IMG_3665.JPG"><link rel="canonical" href="http://linjiangxiong.com/2023/05/28/presto-mathematical-operators-and-functions/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&amp;family=Source+Sans+3:wght@400;600&amp;display=swap"><link rel="stylesheet" href="/css/ud_v5.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ca45da0012a3ce293c6ca4f7e5ebc3a8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=WLKqFH01ST8bHfxLtjsterJZnoEpVlF26sn-Nzzoqfc"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'WLKqFH01ST8bHfxLtjsterJZnoEpVlF26sn-Nzzoqfc')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'WLKqFH01ST8bHfxLtjsterJZnoEpVlF26sn-Nzzoqfc', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Presto | 数学运算符和函数',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-31 23:57:21'
}</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/image/IMG_3665.JPG" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">305</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">55</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">22</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Instant Tutorials</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/2024/06/29/html-instant-tutorial/"><i class="fa-fw fas fa-book"></i><span> HTML Tutorial</span></a></li><li><a class="site-page child" href="/categories/Bash-Tutorial/"><i class="fa-fw fas fa-book"></i><span> Bash Tutorial</span></a></li><li><a class="site-page child" href="/2023/09/05/tutorial-gson/"><i class="fa-fw fas fa-music"></i><span> 极简教程 - Gson</span></a></li><li><a class="site-page child" href="/categories/Redis%E6%95%99%E7%A8%8B/"><i class="fa-fw fas fa-book"></i><span> Redis教程</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Johnson Lin</span></a><a class="nav-page-title" href="/"><span class="site-name">Presto | 数学运算符和函数</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Instant Tutorials</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/2024/06/29/html-instant-tutorial/"><i class="fa-fw fas fa-book"></i><span> HTML Tutorial</span></a></li><li><a class="site-page child" href="/categories/Bash-Tutorial/"><i class="fa-fw fas fa-book"></i><span> Bash Tutorial</span></a></li><li><a class="site-page child" href="/2023/09/05/tutorial-gson/"><i class="fa-fw fas fa-music"></i><span> 极简教程 - Gson</span></a></li><li><a class="site-page child" href="/categories/Redis%E6%95%99%E7%A8%8B/"><i class="fa-fw fas fa-book"></i><span> Redis教程</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Presto | 数学运算符和函数</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-05-28T03:05:05.000Z" title="Created 2023-05-28 11:05:05">2023-05-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-05-31T15:57:21.591Z" title="Updated 2023-05-31 23:57:21">2023-05-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E6%96%87%E6%91%98/">编程文摘</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h2 id="数学运算符"><a href="#数学运算符" class="headerlink" title="数学运算符"></a>数学运算符</h2><table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>相加</td>
</tr>
<tr>
<td>-</td>
<td>相减</td>
</tr>
<tr>
<td>*</td>
<td>相乘</td>
</tr>
<tr>
<td>/</td>
<td>相除（整数除法执行截断运算）</td>
</tr>
<tr>
<td>%</td>
<td>取模（求余）</td>
</tr>
</tbody></table>
<h2 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h2><h3 id="abs-x-→-返回类型与-x-相同"><a href="#abs-x-→-返回类型与-x-相同" class="headerlink" title="abs(x) → [返回类型与 x 相同]"></a>abs(<em>x</em>) → [返回类型与 x 相同]</h3><p>返回 x 的绝对值。</p>
<h3 id="cbrt-x-→-double"><a href="#cbrt-x-→-double" class="headerlink" title="cbrt(x) → double"></a>cbrt(<em>x</em>) → double</h3><p>返回 x 的立方根。</p>
<h3 id="ceil-x-→-返回类型与-x-相同"><a href="#ceil-x-→-返回类型与-x-相同" class="headerlink" title="ceil(x) → [返回类型与 x 相同]"></a>ceil(<em>x</em>) → [返回类型与 x 相同]</h3><p><code>ceiling()</code> 函数的别名。</p>
<h3 id="cosine-similarity-x-y-→-double"><a href="#cosine-similarity-x-y-→-double" class="headerlink" title="cosine_similarity(x, y) → double"></a>cosine_similarity(<em>x</em>, <em>y</em>) → double</h3><p>返回稀疏向量 x 和 y 之间的余弦相似度：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> cosine_similarity(MAP(<span class="keyword">ARRAY</span>[<span class="string">&#x27;a&#x27;</span>], <span class="keyword">ARRAY</span>[<span class="number">1.0</span>]), MAP(<span class="keyword">ARRAY</span>[<span class="string">&#x27;a&#x27;</span>], <span class="keyword">ARRAY</span>[<span class="number">2.0</span>])); <span class="comment">-- 1.0</span></span><br></pre></td></tr></table></figure>

<h3 id="degrees-x-→-double"><a href="#degrees-x-→-double" class="headerlink" title="degrees(x) → double"></a>degrees(<em>x</em>) → double</h3><p>将以弧度为单位的角度 x 转换为度。</p>
<h3 id="e-→-double"><a href="#e-→-double" class="headerlink" title="e() → double"></a>e() → double</h3><p>返回欧拉数 <em>e</em>。</p>
<blockquote>
<p>常数 <em>e</em>，作为数学常数，是自然对数函数的底数，亦称自然常数、自然底数，或是欧拉数（Euler’s number），以瑞士数学家欧拉命名；还有个较少见的名字纳皮尔常数，用来纪念苏格兰数学家约翰·纳皮尔引进对数。它是一个无限不循环小数（无理数），数值约是（小数点后 20 位）：2.71828182845904523536，近似值约为 271801/99990。</p>
</blockquote>
<h3 id="exp-x-→-double"><a href="#exp-x-→-double" class="headerlink" title="exp(x) → double"></a>exp(<em>x</em>) → double</h3><p>返回欧拉数 <em>e</em> 的 x 次幂。</p>
<h3 id="floor-x-→-返回类型与-x-相同"><a href="#floor-x-→-返回类型与-x-相同" class="headerlink" title="floor(x) → [返回类型与 x 相同]"></a>floor(<em>x</em>) → [返回类型与 x 相同]</h3><p>返回小于或等于 x 的最大整数（即：向下舍入到最接近的整数）。注意，该函数返回的类型与参数 x 的类型一致。</p>
<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> typeof(<span class="built_in">floor</span>(<span class="number">3</span>))        <span class="comment">-- integer</span></span><br><span class="line"><span class="keyword">SELECT</span> typeof(<span class="built_in">floor</span>(<span class="number">4.999</span>))    <span class="comment">-- decimal(2,0)</span></span><br><span class="line"><span class="keyword">SELECT</span> typeof(<span class="built_in">floor</span>(<span class="number">123.019</span>))  <span class="comment">-- decimal(4,0)</span></span><br></pre></td></tr></table></figure>

<h3 id="from-base-string-radix-→-bigint"><a href="#from-base-string-radix-→-bigint" class="headerlink" title="from_base(string, radix) → bigint"></a>from_base(<em>string</em>, <em>radix</em>) → bigint</h3><p>将 <code>radix</code> 进制的字符串 <code>string</code> 转换为 bigint。</p>
<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> from_base(<span class="string">&#x27;100&#x27;</span>, <span class="number">16</span>);  <span class="comment">-- 256</span></span><br><span class="line"><span class="keyword">SELECT</span> from_base(<span class="string">&#x27;100&#x27;</span>, <span class="number">2</span>);   <span class="comment">-- 4</span></span><br><span class="line"><span class="keyword">SELECT</span> from_base(<span class="string">&#x27;100&#x27;</span>, <span class="number">10</span>);  <span class="comment">-- 100</span></span><br></pre></td></tr></table></figure>

<h3 id="ln-x-→-double"><a href="#ln-x-→-double" class="headerlink" title="ln(x) → double"></a>ln(<em>x</em>) → double</h3><p>返回 x 的自然对数。</p>
<blockquote>
<p>自然对数是以常数 <em>e</em> 为底数的对数，记作 lnN（N&gt;0）。</p>
</blockquote>
<p>示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ln</span>(e());  <span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ln</span>(<span class="number">1</span>);    <span class="comment">-- 0</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ln</span>(<span class="number">2</span>);    <span class="comment">-- 0.6931471805599453</span></span><br></pre></td></tr></table></figure>

<h3 id="log2-x-→-double"><a href="#log2-x-→-double" class="headerlink" title="log2(x) → double"></a>log2(<em>x</em>) → double</h3><p>返回 x 以 2 为底的对数。</p>
<h3 id="log10-x-→-double"><a href="#log10-x-→-double" class="headerlink" title="log10(x) → double"></a>log10(<em>x</em>) → double</h3><p>返回 x 以 10 为底的对数。</p>
<h3 id="mod-n-m-→-返回类型与输入相同"><a href="#mod-n-m-→-返回类型与输入相同" class="headerlink" title="mod(n, m) → [返回类型与输入相同]"></a>mod(<em>n</em>, <em>m</em>) → [返回类型与输入相同]</h3><p>返回 n 除以 m 的余数。</p>
<p>示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">mod</span>(<span class="number">4</span>, <span class="number">2</span>);  <span class="comment">-- 0</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">mod</span>(<span class="number">2</span>, <span class="number">4</span>);  <span class="comment">-- 2</span></span><br></pre></td></tr></table></figure>

<h3 id="pi-→-double"><a href="#pi-→-double" class="headerlink" title="pi() → double"></a>pi() → double</h3><p>返回常数 <strong><strong>π。</strong></strong></p>
<h3 id="pow-x-p-→-double"><a href="#pow-x-p-→-double" class="headerlink" title="pow(x, p) → double"></a>pow(<em>x</em>, <em>p</em>) → double</h3><p>返回 x 的 p 次幂，power() 函数的别名。</p>
<h3 id="power-x-p-→-double"><a href="#power-x-p-→-double" class="headerlink" title="power(x, p) → double"></a>power(<em>x</em>, <em>p</em>) → double</h3><p>返回 x 的 p 次幂。</p>
<h3 id="radians-x-→-double"><a href="#radians-x-→-double" class="headerlink" title="radians(x) → double"></a>radians(<em>x</em>) → double</h3><p>将度数 x 转换为弧度。</p>
<blockquote>
<p><strong>如何将度数转换为弧度？</strong></p>
<p><strong><strong>π</strong></strong> 弧度等于180度：<strong><strong>π</strong></strong> 弧度 = 180°</p>
<p>1 度等于 0.01745329252 弧度：</p>
<p>1°=<strong>π</strong> / 180°=0.005555556π= 0.01745329252 弧度</p>
<p><strong>弧度 = 度 × π / 180°</strong></p>
</blockquote>
<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> radians(<span class="number">180</span>)  <span class="comment">-- 3.141592653589793</span></span><br></pre></td></tr></table></figure>

<h3 id="rand-→-double"><a href="#rand-→-double" class="headerlink" title="rand() → double"></a>rand() → double</h3><p>返回范围在 0.0 &lt;= x &lt; 1.0 之间的伪随机值，random() 函数的别名。</p>
<h3 id="random-→-double"><a href="#random-→-double" class="headerlink" title="random() → double"></a>random() → double</h3><p>返回范围在 0.0 &lt;= x &lt; 1.0 之间的伪随机值。</p>
<h3 id="secure-rand-→-double"><a href="#secure-rand-→-double" class="headerlink" title="secure_rand() → double"></a>secure_rand() → double</h3><p>返回范围在0.0 &lt;= x &lt; 1.0之间的加密安全随机值，<code>secure_random()</code> 函数的别名。</p>
<h3 id="secure-random-→-double"><a href="#secure-random-→-double" class="headerlink" title="secure_random() → double"></a>secure_random() → double</h3><p>返回范围在0.0 &lt;= x &lt; 1.0之间的加密安全随机值。</p>
<h3 id="secure-random-lower-upper-→-返回类型与-x-相同"><a href="#secure-random-lower-upper-→-返回类型与-x-相同" class="headerlink" title="secure_random(lower, upper) → [返回类型与 x 相同]"></a>secure_random(<em>lower</em>, <em>upper</em>) → [返回类型与 x 相同]</h3><p>返回范围在lower &lt;= x &lt; upper之间的加密安全随机值，其中 lower &lt; upper。</p>
<h3 id="round-x-→-返回类型与-x-相同"><a href="#round-x-→-返回类型与-x-相同" class="headerlink" title="round(x) → [返回类型与 x 相同]"></a>round(<em>x</em>) → [返回类型与 x 相同]</h3><p>返回 x 四舍五入后的整数。</p>
<p>示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> round(<span class="number">3.49</span>);  <span class="comment">-- 3</span></span><br><span class="line"><span class="keyword">SELECT</span> round(<span class="number">3.52</span>);  <span class="comment">-- 4</span></span><br><span class="line"><span class="keyword">SELECT</span> round(<span class="number">3.59</span>);  <span class="comment">-- 4</span></span><br></pre></td></tr></table></figure>

<h3 id="round-x-d-→-返回类型与-x-相同"><a href="#round-x-d-→-返回类型与-x-相同" class="headerlink" title="round(x, d) → [返回类型与 x 相同]"></a>round(<em>x</em>, <em>d</em>) → [返回类型与 x 相同]</h3><p>将 x 四舍五入到小数点后 d 位。</p>
<p>示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> round(<span class="number">3.49</span>, <span class="number">1</span>);     <span class="comment">-- 3.5</span></span><br><span class="line"><span class="keyword">SELECT</span> round(<span class="number">3.5251</span>, <span class="number">2</span>);   <span class="comment">-- 3.53</span></span><br><span class="line"><span class="keyword">SELECT</span> round(<span class="number">3.59491</span>, <span class="number">2</span>);  <span class="comment">-- 3.59</span></span><br></pre></td></tr></table></figure>

<h3 id="sign-x-→-返回类型与-x-相同"><a href="#sign-x-→-返回类型与-x-相同" class="headerlink" title="sign(x) → [返回类型与 x 相同]"></a>sign(<em>x</em>) → [返回类型与 x 相同]</h3><p>返回 x 的符号函数，即：</p>
<ul>
<li>如果参数为 0，则返回 0；</li>
<li>如果参数大于 0，则返回 1；</li>
<li>如果参数小于 0，则返回 -1。</li>
</ul>
<p>对于 double 参数，该函数另外返回：</p>
<ul>
<li>如果参数为 NaN，则返回 NaN；</li>
<li>如果参数为 +Infinity，则返回 1；</li>
<li>如果参数为 -Infinity，则返回 -1。</li>
</ul>
<h3 id="sqrt-x-→-double"><a href="#sqrt-x-→-double" class="headerlink" title="sqrt(x) → double"></a>sqrt(<em>x</em>) → double</h3><p>返回 x 的平方根。</p>
<h3 id="to-base-x-radix-→-varchar"><a href="#to-base-x-radix-→-varchar" class="headerlink" title="to_base(x, radix) → varchar"></a>to_base(<em>x</em>, <em>radix</em>) → varchar</h3><p>将 x 转换为 radix 进制字符串。</p>
<p>示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> to_base(<span class="number">256</span>, <span class="number">16</span>); <span class="comment">-- 100</span></span><br><span class="line"><span class="keyword">SELECT</span> to_base(<span class="number">4</span>, <span class="number">2</span>);    <span class="comment">-- 100</span></span><br><span class="line"><span class="keyword">SELECT</span> to_base(<span class="number">100</span>, <span class="number">10</span>); <span class="comment">-- 100</span></span><br></pre></td></tr></table></figure>

<h3 id="truncate-x-→-double"><a href="#truncate-x-→-double" class="headerlink" title="truncate(x) → double"></a>truncate(<em>x</em>) → double</h3><p>返回 x 舍弃小数位后取整的整数。</p>
<p>示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">truncate</span>(<span class="number">2.5921</span>);    <span class="comment">-- 2</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">truncate</span>(<span class="number">-3.14159</span>);  <span class="comment">-- -3</span></span><br></pre></td></tr></table></figure>

<h3 id="truncate-x-n-→-double"><a href="#truncate-x-n-→-double" class="headerlink" title="truncate(x, n) → double"></a>truncate(<em>x</em>, <em>n</em>) → double</h3><p>返回 x 截断到小数点后 n 位。n 可以是负数，以截断小数点左侧的 n 位数。</p>
<p>示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">truncate</span>(<span class="number">2.5921</span>, <span class="number">1</span>);   <span class="comment">-- 2.5</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">truncate</span>(<span class="number">-3.14159</span>, <span class="number">3</span>); <span class="comment">-- -3.141</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">truncate</span>(<span class="type">REAL</span> <span class="string">&#x27;12.333&#x27;</span>, <span class="number">-1</span>); <span class="comment">-- 10.0 </span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">truncate</span>(<span class="type">REAL</span> <span class="string">&#x27;12.333&#x27;</span>, <span class="number">0</span>);  <span class="comment">-- 12.0</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">truncate</span>(<span class="type">REAL</span> <span class="string">&#x27;12.333&#x27;</span>, <span class="number">1</span>);  <span class="comment">-- 12.3</span></span><br></pre></td></tr></table></figure>

<h3 id="width-bucket-x-bound1-bound2-n-→-bigint"><a href="#width-bucket-x-bound1-bound2-n-→-bigint" class="headerlink" title="width_bucket(x, bound1, bound2, n) → bigint"></a>width_bucket(<em>x</em>, <em>bound1</em>, <em>bound2</em>, <em>n</em>) → bigint</h3><p>将指定的边界 bound1 ~ bound2 均分为 n 等份（即 n 个等值区间）返回 x 所处区间（区间编号从 0 开始）。</p>
<p><strong>示例</strong></p>
<p>在以下示例中，将边界 0 ~ 30 均匀划分为 3 个等值区间，即 [0, 10)，[10, 20)，[20, 30)，区间编号分别为 1、2、3，小于 0 的区间编号为 0 ，大于 30 的区间编号为 4。</p>
<p>当 x 的值分别为 -1，0，10，20，30，50 时，返回 x 所属区间号。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">width_bucket</span>(<span class="number">-1</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">3</span>);  <span class="comment">-- 0</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">width_bucket</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">3</span>);   <span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">width_bucket</span>(<span class="number">10</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">3</span>);  <span class="comment">-- 2</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">width_bucket</span>(<span class="number">20</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">3</span>);  <span class="comment">-- 3</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">width_bucket</span>(<span class="number">30</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">3</span>);  <span class="comment">-- 4</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">width_bucket</span>(<span class="number">50</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">3</span>);  <span class="comment">-- 4</span></span><br></pre></td></tr></table></figure>

<h3 id="width-bucket-x-bins-→-bigint"><a href="#width-bucket-x-bins-→-bigint" class="headerlink" title="width_bucket(x, bins) → bigint"></a>width_bucket(<em>x</em>, <em>bins</em>) → bigint</h3><p>指定预设边界数组 <code>bins</code>，返回 x 所处区间（区间编号从 0 开始）。<code>bins</code> 参数必须是一个 <em>double</em> 类型的数组，并且是按升序排序的。</p>
<p><strong>示例</strong></p>
<p>用数组 [10, 20, 30] 表示自定义区间分布，其分布如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span><span class="number">10</span>    </span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>)    </span><br><span class="line">[<span class="number">20</span>, <span class="number">30</span>) </span><br><span class="line"><span class="operator">&gt;=</span> <span class="number">30</span>   </span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">width_bucket</span>(<span class="number">1</span>, <span class="keyword">array</span>[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]);   <span class="comment">-- 0</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">width_bucket</span>(<span class="number">10</span>, <span class="keyword">array</span>[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]);  <span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">width_bucket</span>(<span class="number">25</span>, <span class="keyword">array</span>[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]);  <span class="comment">-- 2</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">width_bucket</span>(<span class="number">60</span>, <span class="keyword">array</span>[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]);  <span class="comment">-- 3</span></span><br></pre></td></tr></table></figure>

<h2 id="统计函数"><a href="#统计函数" class="headerlink" title="统计函数"></a>统计函数</h2><h3 id="wilson-interval-lower-successes-trials-z-→-double"><a href="#wilson-interval-lower-successes-trials-z-→-double" class="headerlink" title="wilson_interval_lower(successes, trials, z) → double"></a>wilson_interval_lower(<em>successes</em>, <em>trials</em>, <em>z</em>) → double</h3><p>返回伯努利试验过程在由z分数<code>z</code>指定的置信水平下的Wilson分数区间的下界。</p>
<h3 id="wilson-interval-upper-successes-trials-z-→-double"><a href="#wilson-interval-upper-successes-trials-z-→-double" class="headerlink" title="wilson_interval_upper(successes, trials, z) → double"></a>wilson_interval_upper(<em>successes</em>, <em>trials</em>, <em>z</em>) → double</h3><p>返回伯努利试验过程在由z分数<code>z</code>指定的置信水平下的Wilson分数区间的上界。</p>
<h2 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h2><p>所有三角函数的参数均以弧度表示。参见单位转换函数 <em>degrees()</em> 和 *radians()*。</p>
<h3 id="acos-x-→-double"><a href="#acos-x-→-double" class="headerlink" title="acos(x) → double"></a>acos(<em>x</em>) → double</h3><p>返回<code>x</code>的反余弦。</p>
<h3 id="asin-x-→-double"><a href="#asin-x-→-double" class="headerlink" title="asin(x) → double"></a>asin(<em>x</em>) → double</h3><p>返回<code>x</code>的反正弦。</p>
<h3 id="atan-x-→-double"><a href="#atan-x-→-double" class="headerlink" title="atan(x) → double"></a>atan(<em>x</em>) → double</h3><p>返回<code>x</code>的反正切。</p>
<h3 id="atan2-y-x-→-double"><a href="#atan2-y-x-→-double" class="headerlink" title="atan2(y, x) → double"></a>atan2(<em>y</em>, <em>x</em>) → double</h3><p>返回<code>y / x</code>的反正切。</p>
<h3 id="cos-x-→-double"><a href="#cos-x-→-double" class="headerlink" title="cos(x) → double"></a>cos(<em>x</em>) → double</h3><p>返回<code>x</code>的余弦。</p>
<h3 id="cosh-x-→-double"><a href="#cosh-x-→-double" class="headerlink" title="cosh(x) → double"></a>cosh(<em>x</em>) → double</h3><p>返回<code>x</code>的双曲余弦。</p>
<h3 id="sin-x-→-double"><a href="#sin-x-→-double" class="headerlink" title="sin(x) → double"></a>sin(<em>x</em>) → double</h3><p>返回<code>x</code>的正弦。</p>
<h3 id="tan-x-→-double"><a href="#tan-x-→-double" class="headerlink" title="tan(x) → double"></a>tan(<em>x</em>) → double</h3><p>返回<code>x</code>的正切。</p>
<h3 id="tanh-x-→-double"><a href="#tanh-x-→-double" class="headerlink" title="tanh(x) → double"></a>tanh(<em>x</em>) → double</h3><p>返回<code>x</code>的双曲正切。</p>
<h2 id="浮点数函数"><a href="#浮点数函数" class="headerlink" title="浮点数函数"></a>浮点数函数</h2><h3 id="infinity-→-double"><a href="#infinity-→-double" class="headerlink" title="infinity() → double"></a>infinity() → double</h3><p>返回代表正无穷大的常量。</p>
<h3 id="is-finite-x-→-boolean"><a href="#is-finite-x-→-boolean" class="headerlink" title="is_finite(x) → boolean"></a>is_finite(<em>x</em>) → boolean</h3><p>判断<code>x</code>是否是有限的。</p>
<h3 id="is-infinite-x-→-boolean"><a href="#is-infinite-x-→-boolean" class="headerlink" title="is_infinite(x) → boolean"></a>is_infinite(<em>x</em>) → boolean</h3><p>判断<code>x</code>是否是无穷大的。</p>
<h3 id="is-nan-x-→-boolean"><a href="#is-nan-x-→-boolean" class="headerlink" title="is_nan(x) → boolean"></a>is_nan(<em>x</em>) → boolean</h3><p>判断<code>x</code>是否不是一个数字(非数字)。</p>
<h3 id="nan-→-double"><a href="#nan-→-double" class="headerlink" title="nan() → double"></a>nan() → double</h3><p>返回代表不是数字的常量。</p>
<p>（END）</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://linjiangxiong.com">Johnson Lin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://linjiangxiong.com/2023/05/28/presto-mathematical-operators-and-functions/">http://linjiangxiong.com/2023/05/28/presto-mathematical-operators-and-functions/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Presto/">Presto</a></div><div class="post-share"><div class="social-share" data-image="/image/brand/logo-presto-color.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2023/05/31/redis-cmd-strings-append/" title="Redis APPEND 命令"><img class="cover" src="/image/brand/redis.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Redis APPEND 命令</div></div><div class="info-2"><div class="info-item-1">语法1APPEND key value  可用版本 ≥ 2.0.0 时间复杂度 $O(1)$  假设附加的值很小，并且已经存在的值是任何大小，摊销后的时间复杂度是O(1)，因为Redis使用的动态字符串库会在每次重新分配时将可用空间增加一倍。 如果追加的值比较小，而当前已经存在的值大小任意，那么摊销后的时间复杂度是 $O(1)$，因为 Redis 使用的动态字符串库会在每次重新分配时将可用空间增加一倍。 ACL类别 @write, @string, @fast 如果 key 已经存在并且它的值的数据类型是字符串，APPEND 命令会将 value 追加到该 key 原来的值的末尾。如果 key 不存在， APPEND 就简单地将给定 key 设为 value ，就像执行 SET key value 一样。 返回值返回一个整数，表示追加操作后，key 对应值的字符串长度。 示例 1以下例子示范了如何使用 APPEND 命令在 Redis 中追加字符串。 首先，检查 foo 键是否存在，由于返回 0，说明不存在。 然后，执行 APPEND foo...</div></div></div></a><a class="pagination-related" href="/2023/05/27/presto-json-functions/" title="Presto | JSON 函数"><img class="cover" src="/image/brand/presto-logo.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Presto | JSON 函数</div></div><div class="info-2"><div class="info-item-1">is_json_scalar(json) → boolean判断 json 是否为标量（即 JSON 数字、JSON 字符串、true、false 或 null）。 示例 1 1SELECT is_json_scalar(JSON &#x27;&quot;aaa&quot;&#x27;);  1234 _col0------- true(1 row)  示例 2 1SELECT is_json_scalar(JSON &#x27;&#123;&quot;x&quot;: 1, &quot;y&quot;: 2&#125;&#x27;);  1234 _col0------- false(1 row)  json_array_contains(json, value) → boolean判断 value 是否存在于 json（一个包含 JSON 数组的字符串）中。 示例 1 判断整数 1 是否包含在 JSON 整数数组 [1, 2, 3] 中： 1SELECT json_array_contains(JSON &#x27;[1, 2, 3]&#x27;, 1);  1234...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/10/31/presto-left-join-intro/" title="关于Presto的LEFT JOIN，有一个很容易被忽略的点"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-31</div><div class="info-item-2">关于Presto的LEFT JOIN，有一个很容易被忽略的点</div></div><div class="info-2"><div class="info-item-1">LEFT JOIN 在 SQL 查询中是一种很常见的数据查询操作，其查询出来的数据是以左表为主表，保留左表的记录，如果右表没有匹配的记录，依然会返回左表的记录，此时右表的字段用 NULL 填充。 但是，在 Presto 中使用 LEFT JOIN 联结表查询，并需要对左表或右表进行过滤时，有一个特别容易忽略的地方是过滤条件的位置——对左表过滤时条件应写在 where 语句后，对右表过滤时条件应写在 on 后面。 如果对左表的过滤条件写在 on 后面，那么左表的每一行记录都会被保留，相当于没有过滤左表的数据。如果对右表的过滤条件写在 where 后面，那么 LEFT JOIN 查询出来的结果就后 JOIN 查询出来的结果一样，左表没有与右表匹配的记录也会被过滤。 下面通过一个例子来说明。 有两张表——用户信息表和用户地址表，表名分别为：tmp_user 和 tmp_addr，表中的记录如下： 表 tmp_user：     user_id nickname    1 jack   2 johnson   3 marry   表...</div></div></div></a><a class="pagination-related" href="/2022/08/24/lateral-view-explode-in-presto/" title="在Presto中实现Hive LATERAL VIEW EXPLODE"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-24</div><div class="info-item-2">在Presto中实现Hive LATERAL VIEW EXPLODE</div></div><div class="info-2"><div class="info-item-1">我是 Presto 新手，我们公司数据仓库中有一张表（表名：dwd_user_country），记录了用户到访过的国家与地区。这里为简化问题描述，将该表结构抽象为两个字段：user_id 和 countries，其中 countries 字段的值采用英文逗号连接用户到访过的国家与地区。 表数据如下表所示：    user_id countries    26841018 中国,马来西亚,美国,瑞士,泰国,冰岛   现在，我需要从该表中统计每个国家或地区的到访人数，在 Hive 语法中，我可以使用 LATERAL VIEW EXPLODE 将该表的数据转成以下格式，再按 country 字段做 GROUP BY 统计。如果现在是使用 Presto 该怎么做呢？    user_id country    26841018 中国   26841018 马来西亚   26841018 美国   26841018 瑞士   26841018 泰国   26841018 冰岛    Hive 查询 首先使用 split 函数将 countries 字段分割成数组，再使用 lateral...</div></div></div></a><a class="pagination-related" href="/2023/05/08/presto-lambda-expressions/" title="Presto | Lambda 表达式"><img class="cover" src="/image/brand/presto-logo.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-08</div><div class="info-item-2">Presto | Lambda 表达式</div></div><div class="info-2"><div class="info-item-1">Lambda 表达式使用 -&gt; 来表示： 12345678x -&gt; x + 1(x, y) -&gt; x + yx -&gt; regexp_like(x, &#x27;a+&#x27;)x -&gt; x[1] / x[2]x -&gt; IF(x &gt; 0, x, -x)x -&gt; COALESCE(x, 0)x -&gt; CAST(x AS JSON)x -&gt; x + TRY(1 / 0)  大多数 SQL 表达式都可以在 Lambda 主体中使用，但有几个例外：  不支持子查询。如 x -&gt; 2 + (SELECT 3) 不支持聚合。如 x -&gt; max(y)  示例 以下示例演示了使用 split_to_map() 函数对字符串进行层层分割，并返回一个映射（Map）。 首先，将字符串按 ; 划分为多个键值对。 其次，进一步将每对键值对按 : 划分为键和对应的值。 如果存在键重复的情况，则调用 Lambda 表达式 (k, v1, v2) -&gt; concat(v1, v2)...</div></div></div></a><a class="pagination-related" href="/2023/05/26/how-to-convert-between-json-and-presto-data-types/" title="Presto | JSON 与支持的数据类型之间相互转换"><img class="cover" src="/image/brand/presto-logo.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-26</div><div class="info-item-2">Presto | JSON 与支持的数据类型之间相互转换</div></div><div class="info-2"><div class="info-item-1">Presto 支持的各种数据类型的值如何转换为 JSON 格式？Presto 支持将如下基本数据类型的值转换为 JSON 格式： BOOLEAN、TINYINT、SMALLINT、INTEGER、BIGINT、REAL、DOUBLE、VARCHAR。 此外，Presto 同样支持将满足以下条件的数组（ARRAY）、映射（MAP）或行（ROW）转换为 JSON 格式：  数组的元素类型须为上述某一受支持的数据类型； 映射的键类型是 VARCHAR 且值类型须为上述某一受支持的数据类型； 行的每个字段类型均须为上述某一受支持的数据类型。  示例 例 1 NULL 将换为 JSON： 1SELECT CAST(NULL AS JSON);  1234 _col0------- NULL(1 row)  例 2 INTEGER 将换为 JSON： 1SELECT CAST(1 AS JSON);  1234 _col0------- 1(1 row)  例 3 BIGINT 将换为 JSON： 1SELECT CAST(9223372036854775807 AS...</div></div></div></a><a class="pagination-related" href="/2023/05/12/presto-try-functions/" title="Presto | TRY 函数"><img class="cover" src="/image/brand/presto-logo.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-12</div><div class="info-item-2">Presto | TRY 函数</div></div><div class="info-2"><div class="info-item-1">语法try(expression) 在计算表达式 expression 时，如果发生某些类型的错误，则返回 NULL 而不是抛出异常。 作用TRY 函数的作用是在计算一个表达式，如果在计算过程中发生错误，则返回空值 NULL。这在以下两种场景下非常有用:  查询结果中含有非法或无效数据，但你希望返回空值而不是报错。 为表达式指定一个默认值，在计算失败时返回这个默认值。  为实现第二个目的，可以将 TRY 函数与 COALESCE 函数结合使用。COALESCE 函数的作用是返回一系列值中的第一个非空值。所以通过以下方式可以为 TRY 函数指定默认值： 1COALESCE(TRY(expr1), default_value)  如果 TRY 函数成功计算 expr1 并返回一个值（非 NULL），COALESCE 函数会返回该值。但如果TRY 函数返回空值 NULL，COALESCE 函数就会返回我们指定的 default_value 默认值。 TRY 函数可以处理以下错误：  除数为 0 无效的类型转换参数或无效的函数参数 数值超出范围  例如： 12SELECT...</div></div></div></a><a class="pagination-related" href="/2023/05/01/presto-uuid-functions/" title="Presto | UUID 函数"><img class="cover" src="/image/brand/presto-logo.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-01</div><div class="info-item-2">Presto | UUID 函数</div></div><div class="info-2"><div class="info-item-1">uuid() → uuid返回一个伪随机生成的 UUID（第四版本）。 示例 123select uuid();-- 输出结果为 694af1d4-c900-4950-9daf-59f0756df0d1  （END） </div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/image/IMG_3665.JPG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Johnson Lin</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">305</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">55</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">22</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/iuiuu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/iuiuu" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:me@linjiangxiong.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.</span> <span class="toc-text">数学运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="toc-number">2.</span> <span class="toc-text">数学函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#abs-x-%E2%86%92-%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E4%B8%8E-x-%E7%9B%B8%E5%90%8C"><span class="toc-number">2.1.</span> <span class="toc-text">abs(x) → [返回类型与 x 相同]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cbrt-x-%E2%86%92-double"><span class="toc-number">2.2.</span> <span class="toc-text">cbrt(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ceil-x-%E2%86%92-%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E4%B8%8E-x-%E7%9B%B8%E5%90%8C"><span class="toc-number">2.3.</span> <span class="toc-text">ceil(x) → [返回类型与 x 相同]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cosine-similarity-x-y-%E2%86%92-double"><span class="toc-number">2.4.</span> <span class="toc-text">cosine_similarity(x, y) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#degrees-x-%E2%86%92-double"><span class="toc-number">2.5.</span> <span class="toc-text">degrees(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#e-%E2%86%92-double"><span class="toc-number">2.6.</span> <span class="toc-text">e() → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exp-x-%E2%86%92-double"><span class="toc-number">2.7.</span> <span class="toc-text">exp(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#floor-x-%E2%86%92-%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E4%B8%8E-x-%E7%9B%B8%E5%90%8C"><span class="toc-number">2.8.</span> <span class="toc-text">floor(x) → [返回类型与 x 相同]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#from-base-string-radix-%E2%86%92-bigint"><span class="toc-number">2.9.</span> <span class="toc-text">from_base(string, radix) → bigint</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ln-x-%E2%86%92-double"><span class="toc-number">2.10.</span> <span class="toc-text">ln(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#log2-x-%E2%86%92-double"><span class="toc-number">2.11.</span> <span class="toc-text">log2(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#log10-x-%E2%86%92-double"><span class="toc-number">2.12.</span> <span class="toc-text">log10(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mod-n-m-%E2%86%92-%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E4%B8%8E%E8%BE%93%E5%85%A5%E7%9B%B8%E5%90%8C"><span class="toc-number">2.13.</span> <span class="toc-text">mod(n, m) → [返回类型与输入相同]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pi-%E2%86%92-double"><span class="toc-number">2.14.</span> <span class="toc-text">pi() → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pow-x-p-%E2%86%92-double"><span class="toc-number">2.15.</span> <span class="toc-text">pow(x, p) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#power-x-p-%E2%86%92-double"><span class="toc-number">2.16.</span> <span class="toc-text">power(x, p) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#radians-x-%E2%86%92-double"><span class="toc-number">2.17.</span> <span class="toc-text">radians(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rand-%E2%86%92-double"><span class="toc-number">2.18.</span> <span class="toc-text">rand() → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#random-%E2%86%92-double"><span class="toc-number">2.19.</span> <span class="toc-text">random() → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#secure-rand-%E2%86%92-double"><span class="toc-number">2.20.</span> <span class="toc-text">secure_rand() → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#secure-random-%E2%86%92-double"><span class="toc-number">2.21.</span> <span class="toc-text">secure_random() → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#secure-random-lower-upper-%E2%86%92-%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E4%B8%8E-x-%E7%9B%B8%E5%90%8C"><span class="toc-number">2.22.</span> <span class="toc-text">secure_random(lower, upper) → [返回类型与 x 相同]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#round-x-%E2%86%92-%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E4%B8%8E-x-%E7%9B%B8%E5%90%8C"><span class="toc-number">2.23.</span> <span class="toc-text">round(x) → [返回类型与 x 相同]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#round-x-d-%E2%86%92-%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E4%B8%8E-x-%E7%9B%B8%E5%90%8C"><span class="toc-number">2.24.</span> <span class="toc-text">round(x, d) → [返回类型与 x 相同]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sign-x-%E2%86%92-%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E4%B8%8E-x-%E7%9B%B8%E5%90%8C"><span class="toc-number">2.25.</span> <span class="toc-text">sign(x) → [返回类型与 x 相同]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqrt-x-%E2%86%92-double"><span class="toc-number">2.26.</span> <span class="toc-text">sqrt(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#to-base-x-radix-%E2%86%92-varchar"><span class="toc-number">2.27.</span> <span class="toc-text">to_base(x, radix) → varchar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#truncate-x-%E2%86%92-double"><span class="toc-number">2.28.</span> <span class="toc-text">truncate(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#truncate-x-n-%E2%86%92-double"><span class="toc-number">2.29.</span> <span class="toc-text">truncate(x, n) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#width-bucket-x-bound1-bound2-n-%E2%86%92-bigint"><span class="toc-number">2.30.</span> <span class="toc-text">width_bucket(x, bound1, bound2, n) → bigint</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#width-bucket-x-bins-%E2%86%92-bigint"><span class="toc-number">2.31.</span> <span class="toc-text">width_bucket(x, bins) → bigint</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">统计函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#wilson-interval-lower-successes-trials-z-%E2%86%92-double"><span class="toc-number">3.1.</span> <span class="toc-text">wilson_interval_lower(successes, trials, z) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wilson-interval-upper-successes-trials-z-%E2%86%92-double"><span class="toc-number">3.2.</span> <span class="toc-text">wilson_interval_upper(successes, trials, z) → double</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0"><span class="toc-number">4.</span> <span class="toc-text">三角函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#acos-x-%E2%86%92-double"><span class="toc-number">4.1.</span> <span class="toc-text">acos(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#asin-x-%E2%86%92-double"><span class="toc-number">4.2.</span> <span class="toc-text">asin(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#atan-x-%E2%86%92-double"><span class="toc-number">4.3.</span> <span class="toc-text">atan(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#atan2-y-x-%E2%86%92-double"><span class="toc-number">4.4.</span> <span class="toc-text">atan2(y, x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cos-x-%E2%86%92-double"><span class="toc-number">4.5.</span> <span class="toc-text">cos(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cosh-x-%E2%86%92-double"><span class="toc-number">4.6.</span> <span class="toc-text">cosh(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sin-x-%E2%86%92-double"><span class="toc-number">4.7.</span> <span class="toc-text">sin(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tan-x-%E2%86%92-double"><span class="toc-number">4.8.</span> <span class="toc-text">tan(x) → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tanh-x-%E2%86%92-double"><span class="toc-number">4.9.</span> <span class="toc-text">tanh(x) → double</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E5%87%BD%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text">浮点数函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#infinity-%E2%86%92-double"><span class="toc-number">5.1.</span> <span class="toc-text">infinity() → double</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#is-finite-x-%E2%86%92-boolean"><span class="toc-number">5.2.</span> <span class="toc-text">is_finite(x) → boolean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#is-infinite-x-%E2%86%92-boolean"><span class="toc-number">5.3.</span> <span class="toc-text">is_infinite(x) → boolean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#is-nan-x-%E2%86%92-boolean"><span class="toc-number">5.4.</span> <span class="toc-text">is_nan(x) → boolean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nan-%E2%86%92-double"><span class="toc-number">5.5.</span> <span class="toc-text">nan() → double</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/29/multiple-jobs-or-multiple-pipelines-in-one-job-in-flink/" title="Running Multiple Pipelines in Apache Flink: Separate Jobs vs. Single Job with Multiple Pipelines">Running Multiple Pipelines in Apache Flink: Separate Jobs vs. Single Job with Multiple Pipelines</a><time datetime="2024-10-28T23:10:18.000Z" title="Created 2024-10-29 07:10:18">2024-10-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/18/bulk-deleting-keys-in-redis-using-wildcards/" title="Bulk Deleting Keys in Redis Using Wildcards">Bulk Deleting Keys in Redis Using Wildcards</a><time datetime="2024-09-18T15:42:56.000Z" title="Created 2024-09-18 23:42:56">2024-09-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/11/analyzing-redis-source-code-hash/" title="Analyzing Redis Source Code: The Structure and Design of Hash Tables, Chained Hashing, and Incremental Rehashing"><img src="/image/redis-src/2024091101.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Analyzing Redis Source Code: The Structure and Design of Hash Tables, Chained Hashing, and Incremental Rehashing"/></a><div class="content"><a class="title" href="/2024/09/11/analyzing-redis-source-code-hash/" title="Analyzing Redis Source Code: The Structure and Design of Hash Tables, Chained Hashing, and Incremental Rehashing">Analyzing Redis Source Code: The Structure and Design of Hash Tables, Chained Hashing, and Incremental Rehashing</a><time datetime="2024-09-10T22:28:03.000Z" title="Created 2024-09-11 06:28:03">2024-09-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/10/analyzing-redis-source-code-sds/" title="Analyzing Redis Source Code: Simple Dynamic Strings (SDS) – An Efficient and Flexible String Implementation"><img src="/image/redis-src/24091002.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Analyzing Redis Source Code: Simple Dynamic Strings (SDS) – An Efficient and Flexible String Implementation"/></a><div class="content"><a class="title" href="/2024/09/10/analyzing-redis-source-code-sds/" title="Analyzing Redis Source Code: Simple Dynamic Strings (SDS) – An Efficient and Flexible String Implementation">Analyzing Redis Source Code: Simple Dynamic Strings (SDS) – An Efficient and Flexible String Implementation</a><time datetime="2024-09-09T17:13:55.000Z" title="Created 2024-09-10 01:13:55">2024-09-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/06/why-does-redis-use-the-sds-structure-for-strings-instead-of-char/" title="Why Does Redis Use the SDS Structure for Strings Instead of char*?">Why Does Redis Use the SDS Structure for Strings Instead of char*?</a><time datetime="2024-09-05T16:01:26.000Z" title="Created 2024-09-06 00:01:26">2024-09-06</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Johnson Lin</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/main.min.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>